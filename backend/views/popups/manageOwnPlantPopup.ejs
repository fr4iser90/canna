<script src="/sites/scripts/popup/manageOwnPlant/main/manageOwnPlantPopupMain.js" defer type="module" nonce="<%= nonce %>"></script>


<div id="manageOwnPlantPopup" class="popup-container">
    <div class="popup-content">
        <span class="closeBtn">&times;</span>
        <div class="popup-header">
            <h2>Manage Plant: <%= plantName %></h2>
        </div>
        <div class="popup-body">
            <div class="popup-sidebar">
                <button type="button" id="makeCuttingButton">Make a Cutting</button>
                <button type="button" id="addRecordButton">Add Records</button>
                <button type="button" id="changePhaseButton">Change Plant Phase</button>
                <button type="button" id="archivePlantButton">Archive Plant</button>
                <button type="button" id="deletePlantButton">Delete Plant</button>
                <button type="button" id="cancelButton">Cancel</button>
            </div>
            <div class="popup-main">
                <form id="managePlantForm" class="popup-form" data-plant-id="<%= plantId %>" data-plant-name="<%= plantName %>"></form>
                <div id="makeCuttingForm" class="hidden">
                    <!-- Form to make a cutting -->

                    <label for="numberOfCuttings">Number of Cuttings:</label>
                    <input type="number" id="numberOfCuttings" name="numberOfCuttings">
                    <button id="submitCuttingButton">Submit Cutting</button>
                </div>

                <div id="addRecordForm" class="hidden">
                    <!-- Form to add records -->
                    <label for="recordDetails">Record Details:</label>
                    <input type="text" id="recordDetails" name="recordDetails">
                    <button type="submit" id="submitRecordButton">Submit Record</button>
                </div>

                <div id="changePhaseForm" class="hidden">
                    <!-- Form to change plant phase -->
                    <label for="newPhase">New Phase:</label>
                    <input type="text" id="newPhase" name="newPhase">
                    <button type="submit" id="submitPhaseButton">Submit Phase</button>
                </div>

                <div id="archivePlantForm" class="hidden">
                    <label for="archiveReason">Select the reason for archiving:</label><br>
                    <input type="radio" id="diseases" name="archiveReason" value="diseases">
                    <label for="diseases">Died to Diseases</label><br>
                    <input type="radio" id="malnutrition" name="archiveReason" value="malnutrition">
                    <label for="malnutrition">Malnutrition</label><br>
                    <input type="radio" id="harvestedEarly" name="archiveReason" value="harvestedEarly">
                    <label for="harvestedEarly">Harvested Early</label><br>
                    <div id="diseaseOptions" class="hidden">
                        <label for="diseaseType">Select Disease:</label>
                        <select id="diseaseType" name="diseaseType">
                            <option value="Powdery Mildew">Powdery Mildew</option>
                            <option value="Bud Rot">Bud Rot</option>
                        </select>
                    </div>
                    <div id="malnutritionOptions" class="hidden">
                        <label for="malnutritionType">Select Malnutrition Type:</label>
                        <select id="malnutritionType" name="malnutritionType">
                            <option value="Over Fertilization">Over Fertilization</option>
                            <option value="Under Fertilization">Under Fertilization</option>
                        </select>
                    </div>
                    <label for="archiveYield">Yield (if applicable):</label>
                    <input type="number" id="archiveYield" name="archiveYield">
                    <label for="additionalNotes">Additional Notes:</label>
                    <textarea id="additionalNotes" name="additionalNotes"></textarea>
                    <button type="button" id="confirmArchiveButton">Archive Plant</button>
                </div>

                <div id="deletePlantForm" class="hidden">
                    <p>Are you sure you want to delete the plant <%= plantName %> and all associated data?</p>
                    <label for="confirmDeleteName">Type "<%= plantName %>" to confirm deletion:</label>
                    <input type="text" id="confirmDeleteName" name="confirmDeleteName">
                    <button type="button" id="confirmDeleteButton">Delete Plant</button>
                </div>

                <div id="motherPlantDialog" class="modal hidden">
                    <div class="modal-content">
                        <span class="close-button" id="closeMotherPlantDialog">&times;</span>
                        <h2>Vegetation Phase Decision</h2>
                        <p>Do you want the mother plant to stay in the vegetation phase?</p>
                        <button id="stayInVegetationButton">Yes, stay in vegetation</button>
                        <button id="continueToHarvestButton">No, continue to harvest</button>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
</div>
